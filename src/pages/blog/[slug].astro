---
import { type CollectionEntry, getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post: CollectionEntry<"blog">) => ({
        params: { slug: post.slug },
        props: post,
    }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content } = await post.render();
---

<Layout
    title={`${post.data.title} | Adam Daniam Blog`}
    description={post.data.description}
>
    <article class="min-h-screen pt-32 pb-24 md:pt-48 border-b border-black/10">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
            <a
                href="/blog/"
                class="inline-flex items-center text-sm font-medium uppercase tracking-wide text-gray-500 hover:text-black transition-colors mb-12"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="mr-3 size-4"
                >
                    <path d="m15 18-6-6 6-6"></path>
                </svg>
                Kembali ke Blog
            </a>

            <div class="mb-12">
                <div
                    class="font-mono text-xs uppercase tracking-widest text-gray-500 mb-6"
                >
                    <time datetime={post.data.pubDate.toISOString()}>
                        {
                            post.data.pubDate.toLocaleDateString("id-ID", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </time>
                    {
                        post.data.updatedDate && (
                            <span>
                                {" "}
                                â€¢ Updated on{" "}
                                <time
                                    datetime={post.data.updatedDate.toISOString()}
                                >
                                    {post.data.updatedDate.toLocaleDateString(
                                        "id-ID",
                                        {
                                            year: "numeric",
                                            month: "long",
                                            day: "numeric",
                                        },
                                    )}
                                </time>
                            </span>
                        )
                    }
                </div>
                <h1
                    class="font-display text-4xl md:text-5xl lg:text-7xl font-semibold tracking-tighter leading-tight text-black mb-8 uppercase"
                >
                    {post.data.title}
                </h1>
            </div>

            {
                post.data.heroImage && (
                    <div class="aspect-video w-full overflow-hidden mb-16 border border-black/10">
                        <img
                            width={1020}
                            height={510}
                            src={post.data.heroImage}
                            alt={post.data.title}
                            class="w-full h-full object-cover"
                        />
                    </div>
                )
            }

            <div
                class="prose prose-lg md:prose-xl prose-stone max-w-none
                prose-headings:font-display prose-headings:uppercase prose-headings:font-medium
                prose-h2:text-3xl prose-h2:mt-16 prose-h2:mb-8 prose-h2:pb-4 prose-h2:border-b prose-h2:border-black/10
                prose-h3:text-2xl
                prose-p:font-light prose-p:leading-relaxed prose-p:text-gray-800
                prose-a:text-black prose-a:font-medium hover:prose-a:text-gray-600
                prose-strong:font-medium prose-strong:text-black
                prose-ul:font-light prose-ul:text-gray-800
                prose-ol:font-light prose-ol:text-gray-800
                prose-blockquote:border-l-4 prose-blockquote:border-black prose-blockquote:bg-gray-50 prose-blockquote:px-6 prose-blockquote:py-2 prose-blockquote:font-light prose-blockquote:italic
                prose-pre:bg-[#1a1a1a] prose-pre:border prose-pre:border-black/10 prose-pre:rounded-none"
            >
                <Content />
            </div>
        </div>
    </article>
</Layout>
