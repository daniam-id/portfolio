---

---

<div
    id="mobile-dock"
    class="fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] md:hidden"
>
    <nav
        class="flex items-center gap-1 p-2 bg-white/80 backdrop-blur-xl border border-black/5 rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.08)]"
    >
        <button
            data-target="home"
            class="dock-item relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 active:scale-95 group active"
            aria-label="Home"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="w-6 h-6 transition-colors group-[.active]:text-black text-gray-400"
                ><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                ></path><polyline points="9 22 9 12 15 12 15 22"
                ></polyline></svg
            >
            <span
                class="absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-black rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity"
            ></span>
        </button>

        <button
            data-target="about"
            class="dock-item relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 active:scale-95 group"
            aria-label="About"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="w-6 h-6 transition-colors group-[.active]:text-black text-gray-400"
                ><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"
                ></path><circle cx="12" cy="7" r="4"></circle></svg
            >
            <span
                class="absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-black rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity"
            ></span>
        </button>

        <button
            data-target="projects"
            class="dock-item relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 active:scale-95 group"
            aria-label="Projects"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="w-6 h-6 transition-colors group-[.active]:text-black text-gray-400"
                ><rect width="7" height="7" x="3" y="3" rx="1"></rect><rect
                    width="7"
                    height="7"
                    x="14"
                    y="3"
                    rx="1"></rect><rect
                    width="7"
                    height="7"
                    x="14"
                    y="14"
                    rx="1"></rect><rect width="7" height="7" x="3" y="14" rx="1"
                ></rect></svg
            >
            <span
                class="absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-black rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity"
            ></span>
        </button>

        <button
            data-target="contact"
            class="dock-item relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 active:scale-95 group"
            aria-label="Contact"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="w-6 h-6 transition-colors group-[.active]:text-black text-gray-400"
                ><rect width="20" height="16" x="2" y="4" rx="2"></rect><path
                    d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg
            >
            <span
                class="absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-black rounded-full opacity-0 group-[.active]:opacity-100 transition-opacity"
            ></span>
        </button>
    </nav>
</div>

<script>
    const dockItems = document.querySelectorAll(".dock-item");
    const sections = ["home", "about", "projects", "contact"];

    function switchSection(target: string) {
        // Update Dock UI
        dockItems.forEach((item) => {
            const isTarget = (item as HTMLElement).dataset.target === target;
            item.classList.toggle("active", isTarget);
        });

        // Update Visibility on mobile
        if (window.innerWidth < 768) {
            sections.forEach((secId) => {
                const element = document.getElementById(
                    `mobile-section-${secId}`,
                );
                if (element) {
                    if (secId === target) {
                        element.style.display = "block";
                        element.classList.add(
                            "animate-in",
                            "fade-in",
                            "duration-500",
                        );
                    } else {
                        element.style.display = "none";
                        element.classList.remove(
                            "animate-in",
                            "fade-in",
                            "duration-500",
                        );
                    }
                }
            });
            window.scrollTo({ top: 0, behavior: "instant" });
        } else {
            // On desktop, scroll to the section instead?
            // Actually requirement says "Desktop tetap menggunakan layout normal/scroll-based"
            // So we just scroll if needed, but the dock is hidden anyway.
            const element = document.getElementById(target);
            if (element) {
                element.scrollIntoView({ behavior: "smooth" });
            }
        }
    }

    dockItems.forEach((item) => {
        item.addEventListener("click", () => {
            const target = (item as HTMLElement).dataset.target;
            if (target) switchSection(target);
        });
    });

    // Handle initial state and resize
    function handleView() {
        if (window.innerWidth < 768) {
            // Find current active target or default to home
            const activeItem = document.querySelector(
                ".dock-item.active",
            ) as HTMLElement;
            const target = activeItem?.dataset.target || "home";

            sections.forEach((secId) => {
                const element = document.getElementById(
                    `mobile-section-${secId}`,
                );
                if (element) {
                    element.style.display = secId === target ? "block" : "none";
                }
            });
        } else {
            // Restore all on desktop
            sections.forEach((secId) => {
                const element = document.getElementById(
                    `mobile-section-${secId}`,
                );
                if (element) {
                    element.style.display = "block";
                }
            });
        }
    }

    window.addEventListener("resize", handleView);
    document.addEventListener("astro:page-load", handleView);
    // Also run immediately
    handleView();
</script>
